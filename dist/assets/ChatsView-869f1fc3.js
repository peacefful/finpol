import{l as j,s as D,d as E,m as z,n as H,q as L,r as w,k as f,x as F,y as q,u as s,c as u,a as i,t as C,b as p,U as I,z as G,A as O,B as P,C as J,F as K,D as Q,E as W,G as X,o as r,H as Y,I as Z}from"./index-ff62b80b.js";const ee="/assets/chat-810ec4a5.svg",te="/assets/trash-00570b08.svg";let h;const se=new Uint8Array(16);function oe(){if(!h&&(h=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!h))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return h(se)}const o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));function ne(e,t=0){return o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]}const ae=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),M={randomUUID:ae};function le(e,t,c){if(M.randomUUID&&!t&&!e)return M.randomUUID();e=e||{};const l=e.random||(e.rng||oe)();if(l[6]=l[6]&15|64,l[8]=l[8]&63|128,t){c=c||0;for(let d=0;d<16;++d)t[c+d]=l[d];return t}return ne(l)}const _="https://srv.poligramm.kz/api/chats",x=j.create({baseURL:_});x.defaults.headers.common.Authorization=D.getData("token");const ie=async e=>{e.trim()&&(await x.post(_,{roomName:e,uuid:le(),userId:Number(D.getData("id"))}),e="",location.reload())},de=async e=>{try{await x.delete(`${_}/${e}`),location.reload()}catch(t){console.log(t)}},re={class:"text-center text-3xl mt-2"},ue={class:"m-2"},ce={class:"flex items-center mt-3 justify-between flex-wrap"},me={key:0,class:"text-lg absolute top-24 right-7 bg-blue-400 text-white p-2 rounded-sm"},pe={key:0},he={class:"bg-blue-500 p-5 rounded-md flex justify-between items-center mt-2"},ge={class:"flex w-20 justify-between"},ye=["title","onClick"],ve=["title","onClick"],Ce={key:1,class:"mt-6"},be=E({__name:"ChatsView",setup(e){const{body:t,openMenu:c,toogleMenu:l}=z(),{openModal:d,closeModal:N,isOpenModal:V}=H(),{enterChat:S,closeChat:$,showChats:A,uuid:B,room:R}=L(),g=w(""),{t:m}=f({useScope:"global"}),y=w(""),v=F();return q(async()=>await v.getUserData()),(_e,a)=>{var b,U,k;return s(A)===!0?(r(),u("div",{key:0,ref_key:"body",ref:t,class:"min-h-screen overflow-x-hidden"},[i("h1",re,C(s(m)("chatsList")),1),i("div",ue,[i("div",ce,[p(I,{class:"p-2",bg:"#0054A8",value:y.value,"onUpdate:value":a[0]||(a[0]=n=>y.value=n)},null,8,["value"]),p(G,{onClick:a[1]||(a[1]=n=>s(l)())}),s(c)?(r(),u("div",me,[i("p",{onClick:a[2]||(a[2]=(...n)=>s(d)&&s(d)(...n)),class:"cursor-pointer hover:bg-blue-300 p-2 rounded-md"},C(s(m)("createChat")),1)])):O("",!0),p(J,{onSubmitModal:a[4]||(a[4]=n=>s(ie)(g.value)),onCloseModal:s(N),"is-open-modal":s(V),title:"Заполните поля"},{default:P(()=>[p(I,{class:"p-3",value:g.value,"onUpdate:value":a[3]||(a[3]=n=>g.value=n),placeholder:s(m)("chatName")},null,8,["value","placeholder"])]),_:1},8,["onCloseModal","is-open-modal"])]),(k=(U=(b=s(v))==null?void 0:b.user)==null?void 0:U.chats)!=null&&k.length?(r(),u("div",pe,[(r(!0),u(K,null,Q(s(Z)(s(v).user.chats,y.value),n=>(r(),u("ul",{class:"mt-4",key:n.id},[i("li",he,[Y(C(n.roomName)+" ",1),i("div",ge,[i("img",{class:"cursor-pointer",title:s(m)("goChat"),onClick:T=>s(S)(n.uuid,n.roomName),src:ee},null,8,ye),i("img",{class:"cursor-pointer",title:s(m)("delete"),onClick:T=>s(de)(n.id),src:te},null,8,ve)])])]))),128))])):(r(),u("div",Ce,"Чатов пока нет."))])],512)):(r(),W(X,{key:1,onCloseChat:s($),uuid:s(B),name:s(R)},null,8,["onCloseChat","uuid","name"]))}}});export{be as default};
